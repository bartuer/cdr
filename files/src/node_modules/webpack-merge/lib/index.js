"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function merge(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===1?Array.isArray(t[0])?_mergeWith3.default.apply(undefined,[{}].concat(_toConsumableArray(t[0]),[(0,_joinArrays2.default)(t[0])])):t[0].customizeArray||t[0].customizeObject?function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return Array.isArray(n[0])?_mergeWith3.default.apply(undefined,[{}].concat(_toConsumableArray(n[0]),[(0,_joinArrays2.default)(t[0])])):_mergeWith3.default.apply(undefined,[{}].concat(n,[(0,_joinArrays2.default)(t[0])]))}:t[0]:_mergeWith3.default.apply(undefined,[{}].concat(t,[(0,_joinArrays2.default)()]))}function _customizeArray(e){return function(t,n,r){switch(e[r]){case"prepend":return[].concat(_toConsumableArray(n),_toConsumableArray(t));case"replace":return n;default:return!1}}}function customizeObject(e){return function(t,n,r){switch(e[r]){case"prepend":return(0,_mergeWith3.default)({},n,t,(0,_joinArrays2.default)());case"replace":return n;default:return!1}}}function isRule(e){return["preLoaders","loaders","postLoaders","rules"].indexOf(e)>=0}var _values2=require("lodash/values"),_values3=_interopRequireDefault(_values2),_unionWith2=require("lodash/unionWith"),_unionWith3=_interopRequireDefault(_unionWith2),_mergeWith2=require("lodash/mergeWith"),_mergeWith3=_interopRequireDefault(_mergeWith2),_differenceWith2=require("lodash/differenceWith"),_differenceWith3=_interopRequireDefault(_differenceWith2),_joinArrays=require("./join-arrays"),_joinArrays2=_interopRequireDefault(_joinArrays),_joinArraysSmart=require("./join-arrays-smart"),_unique=require("./unique"),_unique2=_interopRequireDefault(_unique),mergeSmart=merge({customizeArray:function(t,n,r){return isRule(r.split(".").slice(-1)[0])?(0,_unionWith3.default)(t,n,_joinArraysSmart.uniteRules.bind(null,{},r)):null}}),mergeMultiple=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return(0,_values3.default)(merge(n))},mergeStrategy=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return merge({customizeArray:_customizeArray(t),customizeObject:customizeObject(t)})},mergeSmartStrategy=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return merge({customizeArray:function(n,r,i){var s=i.split(".").slice(-1)[0];if(isRule(s))switch(t[i]){case"prepend":return[].concat(_toConsumableArray((0,_differenceWith3.default)(r,n,function(e,n){return(0,_joinArraysSmart.uniteRules)(t,i,e,n,"prepend")})),_toConsumableArray(n));case"replace":return r;default:return(0,_unionWith3.default)(n,r,_joinArraysSmart.uniteRules.bind(null,t,i))}return _customizeArray(t)(n,r,i)},customizeObject:customizeObject(t)})};module.exports=merge,module.exports.multiple=mergeMultiple,module.exports.smart=mergeSmart,module.exports.strategy=mergeStrategy,module.exports.smartStrategy=mergeSmartStrategy,module.exports.unique=_unique2.default;